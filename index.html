<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Intro - Spaces</title>
		<link rel="SHORTCUT ICON" href="/favicon.ico" type="image/x-icon">
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<style>
			body {
				background:#000;
				color:#fff;
				padding:0;
				margin:0;
			}
			section#home{
				display: block;
			}			
			section#more{
			    display: block;
			    height: 300px;
			    text-align: center;
			    background: #F05222;
			}
			section#projects{
			    display: block;
			    height: 300px;
			    text-align: center;
			    background: #7CBA01;
			}
			section#about{
			    display: block;
			    height: 300px;
			    text-align: center;
			    background: #00A6F0;
			}
			section#contacts{
			    display: block;
			    height: 300px;
			    text-align: center;
			    background: #FFB901;
			}
			nav{
			    position: fixed;
			    right:20px;
			    top: 20px;
			    padding: 10px;
			    background: #00000000;
			    -webkit-transition: top 0.8s ease;
			}
			a{
			    display: block;
			    font: 24px/48px sans-serif;
			    text-decoration: none;
			    pointer-events:none;
			    color: #000;
			    opacity: 0.0;
			    -webkit-transition: opacity 0.8s ease;
			}
			a.active{
			  opacity: 1.0;
			}
		</style>
		<script src="js/jquery-1.8.3.min.js"></script>
		<script>
			var id_global;

			jQuery(window).scroll(function(){
				var $sections = $('section');
				$sections.each(function(i,el){
				var top  = $(el).offset().top-100;
				var bottom = top +$(el).height();
				var scroll = $(window).scrollTop();
				var id = $(el).attr('id');
				if (id_global == null) id_global = id;
				if( scroll > top && scroll < bottom){
					$('a.active').removeClass('active');
					$('a[href="#'+id+'"]').addClass('active');
					
					var delta = 20 - (getId(id) - 1) * 48;
					var top_delta = String(delta) + 'px';
					$('nav').css( 'top', top_delta );
					/*if (id_global != id) {
						var delta = getId(id) - getId(id_global);
						var top_delta = (delta < 0) ? '+=' + Math.abs(delta * 48) + 'px' :
									      '-=' + Math.abs(delta * 48) + 'px';						
						$('nav').css( 'top', top_delta );
						id_global = id;	
					}*/					
				}
					
				function getId(id_name) {
					var result;
					switch (id_name) {
						case 'home': result = 1; break;
						case 'more': result = 2; break;
						case 'projects': result = 3; break;
						case 'about': result = 4; break;
						case 'contacts': result = 5; break;
					}
					return result;
				}
			})});

			$("nav").on("click","a", function (event) {
				event.preventDefault(); 
				var id  = $(this).attr('href');
				top = $(id).offset().top;
				// анимируем переход к блоку, время: 800 мс
				$('body,html').animate({scrollTop: top}, 800);
			});
		</script>		
		<script src="js/three.min.js"></script>
		<script src="js/CopyShaderMin.js"></script>		
		<script src="js/DigitalGlitchMin.js"></script>
		<script src="js/EffectComposerMin.js"></script>
		<script src="js/ShaderPassMin.js"></script>
		<script src="js/TexturePassMin.js"></script>
		<script src="js/GlitchPassMin.js"></script>
	</head>
	<body>		
		<nav>
		    <a href="#home"> Home </a>
		    <a href="#more"> More </a>
		    <a href="#projects"> Projects </a>
		    <a href="#about"> About </a>
		    <a href="#contacts"> Contacts </a>
		</nav>
		<div style="font-size:0;">
		    <section id ="home"></section>
		    <section id ="more"> More Info </section>
		    <section id ="projects"> Provide Services for Projects </section>
		    <section id ="about"> About Us </section>
		    <section id ="contacts"> Contacts </section>
		<div>
		<script src="js/intro/frame.js"></script>
	</body>
</html>
