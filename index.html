<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Intro - Spaces</title>
		<link rel="SHORTCUT ICON" href="/favicon.ico" type="image/x-icon">
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<style>
			body {
				background:#000;
				color:#fff;
				padding:0;
				margin:0;
			}
			.navbar {
				height: 64px;
				position: sticky;
				top: 0;
				background: #777;
				box-shadow: 0px -1px 14px 3px #000000;
			}
			section#home{
				display: block;	
			}			
			section#more{
			    display: block;
			    height: 300px;
			    text-align: center;
			    background: #F05222;
			}
			section#projects{
			    display: block;
			    height: 300px;
			    text-align: center;
			    background: #7CBA01;
			}
			section#about{
			    display: block;
			    height: 300px;
			    text-align: center;
			    background: #00A6F0;
			}
			section#contacts{
			    display: block;
			    height: 650px;
			    text-align: center;
			    background: #FFB901;
			}
			nav{
			    position: fixed;
			    z-index: 10;
			    right:-8px;
			    top: 0px;
			    padding: 20px;
			    background: #00000000;
			    -webkit-transition: top 0.8s ease;
			}
			a{
			    display: block;
			    font: 24px/24px sans-serif;
			    text-decoration: none;
			    pointer-events:none;
			    color: #fff;
			    opacity: 0.0;
			    -webkit-transition: opacity 0.8s ease;
			}
			a.active{
			  opacity: 0.8;
			}
		</style>		
		<script src="js/jquery-1.8.3.min.js"></script>
		<script>
			var isScrolling = false;
			
			$(window).on("load", function () {
				$('a.active').removeClass('active');
				$('a[href="#'+'home'+'"]').addClass('active');
				//jQuery.scrollSpeed(100, 800);
				/*$('body').mCustomScrollbar({
					  theme: "dark-thin"
				});*/
			});
			
			

			$( window ).scroll(function() {
				console.log('scroll');
				$('section').each(function(i,el){
					var top  = $(el).offset().top-100;
					var bottom = top +$(el).height();
					var scroll = $(window).scrollTop();
					var id = $(el).attr('id');
					if( scroll > top && scroll < bottom){
						$('a.active').removeClass('active');
						$('a[href="#'+id+'"]').addClass('active');
						var delta = 0 - (getId(id) - 1) * 24;
						var top_delta = String(delta) + 'px';
						$('nav').css( 'top', top_delta );					
					}

					function getId(id_name) {
						var result;
						switch (id_name) {
							case 'home': result = 1; break;
							case 'more': result = 2; break;
							case 'projects': result = 3; break;
							case 'about': result = 4; break;
							case 'contacts': result = 5; break;
						}
						return result;
					}
				})
			});
			
			$('html, body').bind('mousewheel', function(event) {
				var delta = ((event.originalEvent.wheelDelta < 0) ? -300 : 300);
				var top = $('html, body').scrollTop() - delta;
				event.preventDefault();
				if (!isScrolling) {
					isScrolling = true;
					$('html, body').animate({
						scrollTop: top
					}, 500, , function() {
						isScrolling = false;
					});
				}
			});

			$("nav").on("click","a", function (event) {
				event.preventDefault(); 
				var id  = $(this).attr('href');
				top = $(id).offset().top;
				// анимируем переход к блоку, время: 800 мс
				$('body,html').animate({scrollTop: top}, 800);
			});
		</script>		
		<script src="js/three.min.js"></script>
		<script src="js/CopyShaderMin.js"></script>		
		<script src="js/DigitalGlitchMin.js"></script>
		<script src="js/EffectComposerMin.js"></script>
		<script src="js/ShaderPassMin.js"></script>
		<script src="js/TexturePassMin.js"></script>
		<script src="js/GlitchPassMin.js"></script>
	</head>
	<body>		
		<nav>
		    <a href="#home"> Home <img src="res/ic-home-min.png"></a>
		    <a href="#more"> More <img src="res/ic-more-min.png"></a>
		    <a href="#projects"> Projects <img src="res/ic-projects-min.png"></a>
		    <a href="#about"> About <img src="res/ic-about-min.png"></a>
		    <a href="#contacts"> Contacts <img src="res/ic-contacts-min.png"></a>
		</nav>
		<div style="font-size:0;">
		    <section id ="home"></section>
		    <div class="navbar"></div>
		    <section id ="more"> More Info </section>
		    <section id ="projects"> Provide Services for Projects </section>
		    <section id ="about"> About Us </section>
		    <section id ="contacts"> Contacts </section>
		<div>
		<script src="js/intro/frame.js"></script>
	</body>
</html>
